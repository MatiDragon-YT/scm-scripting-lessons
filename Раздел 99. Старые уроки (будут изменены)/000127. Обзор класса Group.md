Обзор класса Group||wmysterio|wmysterio|wmysterio@yandex.ru|||Как и в San Andreas мы можем создавать и управлять группами людей в 4-ке. Этот урок посвящен именно этой теме. Для создания групп существует класс Group. Конструктор выглядит следующим образом:<br><table style="width: 100%; border-collapse: collapse;"><tbody><tr><td style="border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">Group Fr = new Group(Player.Character)<br></td></tr></tbody></table>Мы указывает переменную класса, которому присваивается результат конструктора. В качестве параметра указывается пед, который будет лидером этой группы, в нашем случаи это игрок. После создания группы, мы получаем доступ к следующим командам этого класса:<br><table style="width: 100%; border-collapse: collapse;"><tbody><tr><td style="vertical-align: top; border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">Fr.AddMember(MyPed);<br><br>Добавить педа в группу. Можно использовать команду как проверку<br><br>**MyPed** - лидер, объект класса <font color="#808000">**Ped**</font><br><br>Возвращаемый параметр: **bool**<br><br>Примеры в Sanny Builder:<table style="width: 100%; border-collapse: collapse;"><tbody><tr><td style="border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">0631: put_actor 1@ in_group 0@<br></td></tr></tbody></table></td></tr><tr><td style="vertical-align: top; border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">Fr.Delete();<br><br>Уничтожает группу(как объект)<br><br>Примеры в Sanny Builder:<table style="width: 100%; border-collapse: collapse;"><tbody><tr><td style="border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">0632: release_group 0@<br></td></tr></tbody></table></td></tr><tr><td style="vertical-align: top; border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">Fr.EnterVehicle(Veh, true, true);<br><br>Заставляет группу сесть в транспорт.<br>**<br>Veh** - транспорт, объект класса <font color="#808000">**Vehicle**</font><br>**true** - включая лидера / false - без него<br>**true** - закрепить водителя в транспорте<br><br>Примеры в Sanny Builder:<table style="width: 100%; border-collapse: collapse;"><tbody><tr><td style="border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">0940: set_group 0@ enters_leaders_vehicle 1</td></tr></tbody></table></td></tr><tr><td style="vertical-align: top; border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">Fr.Exists()<br><br>Проверка: "**Группа существует?**"<br><br>Примеры в Sanny Builder: (возможный вариант)<br><table style="width: 100%; border-collapse: collapse;"><tbody><tr><td style="border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">07FD:&nbsp;&nbsp; group 0@ alive<br></td></tr></tbody></table></td></tr><tr><td style="vertical-align: top; border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">Fr.FollowStatus = 1;<br><br>Установить статус следования за лидером.<br><br>**1** - статус, число(**int**)<br><br>Примеры в Sanny Builder: (возможный вариант)<br><table style="width: 100%; border-collapse: collapse;"><tbody><tr><td style="border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">07B3: set_group 0@ give_command 1<br></td></tr></tbody></table></td></tr><tr><td style="vertical-align: top; border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">Fr.Formation = 4;<br><br>??? Установить формирование. Возможно устанавливает максимальное количество братков, которых можно нанять ???<br><br>**4** - число(**int**)<br><br>Примеры в Sanny Builder: неизвестно<br></td></tr><tr><td style="vertical-align: top; border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">Fr.FormationSpacing = 4.0F;<br><br>??? Устанавливает расстояние, при которых формируется группа. Если чел находится дальше указанного радиуса, то он не добавляется в группу ???<br><br>**4.0F** - число(**float**)<br><br>Примеры в Sanny Builder: неизвестно<br></td></tr><tr><td style="vertical-align: top; border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">Fr.GetMember(1);<br><br>Получить члена группы, находящийся по заданному индексу<br><br>**1** - индекс(оно же место) в группе, число(**int**)<br><br>Возвращаемый параметр: объект класса <font color="#808000">**Ped**</font><br><br>Примеры в Sanny Builder:<br><table style="width: 100%; border-collapse: collapse;"><tbody><tr><td style="border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">092B: 1@ = group 0@ member 1<br></td></tr></tbody></table></td></tr><tr><td style="vertical-align: top; border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">Fr.isLeader(MyPed)<br><br>Проверка: "**Пед является лидером группы?**"<br><br>**MyPed** - лидер, объект класса <font color="#808000">**Ped**</font><br><br>Примеры в Sanny Builder:<br><table style="width: 100%; border-collapse: collapse;"><tbody><tr><td style="border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">06EF:&nbsp;&nbsp; actor 1@ leading_group 0@<br></td></tr></tbody></table></td></tr><tr><td style="vertical-align: top; border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">Fr.isMember(MyPed)<br><br>Проверка: "**Пед находится в группе?**"<br><br>**MyPed** - пед, объект класса <font color="#808000">**Ped**</font><br><br>Примеры в Sanny Builder:<br><table style="width: 100%; border-collapse: collapse;"><tbody><tr><td style="border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">06EE:&nbsp;&nbsp; actor 1@ in_group 0@<br></td></tr></tbody></table></td></tr><tr><td style="vertical-align: top; border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">Fr.Leader = MyPed;<br><br>Получить или задать лидера группы.<br><br>**MyPed** - пед, объект класса <font color="#808000">**Ped**</font><br><br>Возвращаемый параметр: пед, объект класса <font color="#808000">**Ped**</font><br><br>Примеры в Sanny Builder:<br><table style="width: 100%; border-collapse: collapse;"><tbody><tr><td style="border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">0630: put_actor 1@ in_group 0@ as_leader<br></td></tr></tbody></table></td></tr><tr><td style="vertical-align: top; border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">Fr.MaxMemberCount;<br><br>Получить максимальное количество участников группы<br><br>Возвращаемый параметр: число(**int**)<br><br>Примеры в Sanny Builder: (возможный вариант)<br><table style="width: 100%; border-collapse: collapse;"><tbody><tr><td style="border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">07F6: get_group 0@ number_of_leaders_to 1@ number_of_members_to 2@<br></td></tr></tbody></table></td></tr><tr><td style="vertical-align: top; border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">Fr.MemberCount;<br><br>Получить текущее количество участников группы<br><br>Возвращаемый параметр: число(**int**)<br><br>Примеры в Sanny Builder: (возможный вариант)<br><table style="width: 100%; border-collapse: collapse;"><tbody><tr><td style="border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">07F6: get_group 0@ number_of_leaders_to 1@ number_of_members_to 2@<br></td></tr></tbody></table></td></tr><tr><td style="vertical-align: top; border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">Fr.RemoveAllMembers();<br><br>Распустить группу.<br><br>Примеры в Sanny Builder: (возможные варианты)<br><table style="width: 100%; border-collapse: collapse;"><tbody><tr><td style="border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">0A31: set_player 0@ group_to_follow_never 1<br>0A20: disable_player 0@ group_control_back 1<br></td></tr></tbody></table></td></tr><tr><td style="vertical-align: top; border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">Fr.RemoveMember(1); <br>Fr.RemoveMember(MyPed);<br><br>Отчислить актёра из группы. Эта команда имеет 2 перегрузки. В одном случаи мы можем уволить педа по его индексу, в другом - уволить по хэндлу<br><br>**1** - индекс(оно же место) в группе, число(**int**)<br>**MyPed** - пед, объект класса <font color="#808000">**Ped**</font><br><br>Примеры в Sanny Builder:<br><table style="width: 100%; border-collapse: collapse;"><tbody><tr><td style="border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">06C9: remove_actor 1@ from_group<br></td></tr></tbody></table>.<br></td></tr><tr><td style="vertical-align: top; border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">Fr.SeparationRange = 30.0F;<br><br>??? Установить максимальную дистанцию, при котором участники будут следовать лидеру ???<br><br>**30.0F** - дистанция, число(**float**)<br><br>Примеры в Sanny Builder: (возможный вариант)<br><table style="width: 100%; border-collapse: collapse;"><tbody><tr><td style="border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">06F0: set_group 0@ distance_limit_to 30.0<br></td></tr></tbody></table></td></tr><tr><td style="vertical-align: top; border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">Fr.ToArray(true);<br><br>Получить массив всех участников группы<br><br>**true** - включая лидера<br><br>Возвращаемый параметр: массив <font color="#808000">**Ped**</font>[]<br><br>Примеры в Sanny Builder: нет<br></td></tr><tr><td style="vertical-align: top; border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">Fr.ToList(true);<br><br>Получить список всех участников группы<br><br>**true** - включая лидера<br><br>Возвращаемый параметр: список, объект <font color="#808000">**PedCollection**</font><br><br>Примеры в Sanny Builder: нет<br></td></tr></tbody></table>Давайте напишем простой пример: при нажатии кнопки TAB, возле Нико спавнятся 3 случайных человека, которые будут участниками группы игрока:<!--uzcode--><div class="bbCodeBlock"><div class="bbCodeName" style="padding-left:5px;font-weight:bold;font-size:7pt">Код</div><div class="codeMessage" style="border:1px inset;max-height:200px;overflow:auto;height:expression(this.scrollHeight<5?this.style.height:scrollHeight>200?'200px':''+(this.scrollHeight+5)+'px');"><!--uzc-->using System;<br>using System.Windows.Forms;<br>using System.Drawing;<br>using GTA;<br><br>namespace TestScript {<br>&nbsp;&nbsp;&nbsp; public class Thread : Script {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public Thread() {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while (true) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(Game.isKeyPressed(Keys.Tab)){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Vector3 Pos = Player.Character.Position;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Group Fr = new Group(Player.Character);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (int Temp = 0; Temp &lt; 3; Temp++ ) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Pos.X += 2.0F;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Fr.AddMember(World.CreatePed(Pos));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Fr.FollowStatus = 1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Wait(0); <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; } <br>}<br><!--/uzc--></div></div><!--/uzcode-->Результат: удалось натравить группу на пешехода<br><!--IMG2--><a href="/_pu/1/98136388.png" class="ulightbox" target="_blank" title="Нажмите, для просмотра в полном размере..."><img alt="" src="/_pu/1/s98136388.jpg" /></a><!--IMG2--><br><br>Я не знаю сколько людей можно завербовать, нажимал TAB, пока не получил ошибку скрипта, и в результате получилось такое крошечное количество:<br><!--IMG1--><a href="/_pu/1/62721357.png" class="ulightbox" target="_blank" title="Нажмите, для просмотра в полном размере..."><img alt="" src="/_pu/1/s62721357.jpg" /></a><!--IMG1--><br><br>На этом урок окончен. До встречи в следующем <img src="http://s49.ucoz.net/sm/15/wink.gif" alt="wink" align="absmiddle" border="0">|714|1|0|62721357`png`600`525`400`350\|98136388`png`600`525`400`350\||obzor_klassa_group|1392794866