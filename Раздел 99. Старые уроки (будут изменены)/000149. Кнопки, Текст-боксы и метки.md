Кнопки, Текст-боксы и метки||wmysterio|wmysterio|wmysterio@yandex.ru|/||Всем хай! Мы продолжаем изучать формы Windows, и сегодня мы ознакомимся ещё с двумя элементами, как кнопки и метками.<br><br>Начнём с кнопок. Они находятся в категории "Стандартные элементы управления". Перетащим её на нашу форму:<br><!--IMG1--><a href="/_pu/2/73365337.png" class="ulightbox" target="_blank" title="Нажмите, для просмотра в полном размере..."><img alt="" src="/_pu/2/s73365337.jpg" /></a><!--IMG1--><br>Давайте изменим внешне нашу кнопку, добавив изображение на неё. Оставим пустое поле в свойстве кнопки "Text", что бы он не мешал нам. Я подготовил специальный флаг, который вот: (выложил, что бы вы могли его скачать если вдруг надумаете повторять те действия, которые в данный момент делаю я) <br><!--IMG2--><img alt="" src="/_pu/2/68930594.png" /><!--IMG2--><br>Теперь делаем следующее в свойствах кнопки:<br>1) Находим свойство "Image", и нажимаем на "...".<br>2) Перед нами появится окно выбора ресурса. Нажимаем на кнопку "Импорт":<br><!--IMG3--><a href="/_pu/2/00061105.png" class="ulightbox" target="_blank" title="Нажмите, для просмотра в полном размере..."><img alt="" src="/_pu/2/s00061105.jpg" /></a><!--IMG3--><br>И указываем картинку, которую хотим добавить.<br>3) После загрузки в ресурсы картинки, выбираем её, и нажимаем "ОК":<br><!--IMG4--><a href="/_pu/2/22199530.png" class="ulightbox" target="_blank" title="Нажмите, для просмотра в полном размере..."><img alt="" src="/_pu/2/s22199530.jpg" /></a><!--IMG4--><br><br>Теперь на нашей кнопке появился этот рисунок. Чтобы он нормально отображался на форме, изменим размер кнопки на 34х34:<br><!--IMG5--><img alt="" src="/_pu/2/70475274.png" /><!--IMG5--><br>Переместим нашу кнопку в правый верхних угол и зададим ей свойство "Anchor" на это:<br><!--IMG6--><img alt="" src="/_pu/2/76188703.png" /><!--IMG6--><br>А также это же свойство для текстового поля:<br><!--IMG7--><img alt="" src="/_pu/2/73454444.png" /><!--IMG7--><br>Таким образом элементы формы будут изменятся от размера самой формы. На конец, переместим наши элементы в более удобную композицию, оставив немного пустого места внизу, для нашей метки:<br><!--IMG8--><a href="/_pu/2/81121380.png" class="ulightbox" target="_blank" title="Нажмите, для просмотра в полном размере..."><img alt="" src="/_pu/2/s81121380.jpg" /></a><!--IMG8--><br>Теперь программа очень напоминает&nbsp; обычный браузер, только упрощенный. Сами-по-себе кнопка и поле бесполезные, так как не выполняют никаких действий. Наша задача - заставить кнопку переходить на сайт, который пользователь введёт в текстовое поле. Для этого выделим нашу кнопку и зайдём в её свойства. Найдите там "События"(иконка молнии):<br><!--IMG9--><img alt="" src="/_pu/2/99596947.png" /><!--IMG9--><br>и найдите там поле "Click", поле чего нажмите 2 раза ЛКМ на пустом поле возле него:<br><!--IMG10--><img alt="" src="/_pu/2/97335681.png" /><!--IMG10--><br>Компилятор сформирует нам обработчик события, в котором мы должны прописать переход на сайт:<br><!--IMG11--><a href="/_pu/2/57348228.png" class="ulightbox" target="_blank" title="Нажмите, для просмотра в полном размере..."><img alt="" src="/_pu/2/s57348228.jpg" /></a><!--IMG11--><br>В нём мы должны прописать следующий код:<table style="width: 100%; border-collapse: collapse; border: 1px solid black;" width=""><tbody><tr><td style="vertical-align: top; border: 1px solid black; letter-spacing: 0px; word-spacing: 0px;">webBrowser1.Url = new Uri( textBox1.Text );<br></td></tr></tbody></table>Действует это так:<br>1) Получаем ссылку с помощью конструктора **new Uri**, в параметр которого строковый адрес web-ресурса. В место строки мы указываем текст "Тестового поля" и создаём новый объект - Веб-ссылка. Общая схема такова:<br><!--IMG12--><a href="/_pu/2/80016752.png" class="ulightbox" target="_blank" title="Нажмите, для просмотра в полном размере..."><img alt="" src="/_pu/2/s80016752.jpg" /></a><!--IMG12--><br>Но здесь нужно быть осторожным, так как ссылка имеет строгий формат(как и обычная web-ссылка). Она должна содержать протокол http или подобные, должна содержать латинские символы. Что-бы избежать ошибок, типа "Недопустимый URI: Невозможно определить формат URI." кинем наш код блок <font color="#0000cd">**try**</font>:<br><table style="width: 100%; border-collapse: collapse; border: 1px solid black;" width=""><tbody><tr><td style="vertical-align: top; border: 1px solid black; letter-spacing: 0px; word-spacing: 0px;">try {<br>&nbsp;&nbsp;&nbsp;&nbsp; <font color="#006400">webBrowser1.Url = new Uri( textBox1.Text );</font><br>} catch {<font color="#006400"> return;</font> }<br></td></tr></tbody></table>Таким образом мы обезопасили себя от нестабильной работы. Однако нужно сообщать пользователю о неверном формате, иначе он будет в недоумении от того, почему браузер не переходит по заданной ссылке.<br><br>Есть два способа этого сделать:<br>1) Через статичный класс <font color="#8b4513">**MessageBox**</font>. В блоке <font color="#0000cd">catch</font> в место<font color="#00bfff"> <font color="#0000cd">return</font></font> нужно написать:<br><table style="width: 100%; border-collapse: collapse; border: 1px solid black;" width=""><tbody><tr><td style="vertical-align: top; border: 1px solid black; letter-spacing: 0px; word-spacing: 0px;">} catch {<br>&nbsp;&nbsp;&nbsp;&nbsp; <font color="#006400">MessageBox.Show("Неправильный адрес WEB-ссылки");</font><br>}<br></td></tr></tbody></table><br><!--IMG13--><a href="/_pu/2/07881039.png" class="ulightbox" target="_blank" title="Нажмите, для просмотра в полном размере..."><img alt="" src="/_pu/2/s07881039.jpg" /></a><!--IMG13--><br>Этот способ самый используемый, но я предлагаю вам сделать вывод сообщения по-другому. С помощью меток, заодно и изучим их.<br><br>Найдём в панели инструментов объект <font color="#0000cd">**Label**</font>:<br><!--IMG14--><img alt="" src="/_pu/2/59518869.png" /><!--IMG14--><br>И переместим его мышью в нижнюю часть макета программы:<br><!--IMG15--><img alt="" src="/_pu/2/52482416.png" /><!--IMG15--><br>Оставим свойство этого Лейбла пустым. А затем в исключении напишем следующий код:<table style="width: 100%; border-collapse: collapse; border: 1px solid black;" width=""><tbody><tr><td style="vertical-align: top; border: 1px solid black; letter-spacing: 0px; word-spacing: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private void button1_Click( object sender, EventArgs e ) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; webBrowser1.Url = new Uri( textBox1.Text );<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; label1.Text = "";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } catch {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#006400"> label1.Text = "Неверное имя ссылки!";</font><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br></td></tr></tbody></table>Если срабатывает исключение, то мы задаём имя программно для нашей метки. Если всё ввели правильно, то текст метки опять делается пустым. Графически этот процесс можно изобразить так:<br><!--IMG16--><a href="/_pu/2/88734570.png" class="ulightbox" target="_blank" title="Нажмите, для просмотра в полном размере..."><img alt="" src="/_pu/2/s88734570.jpg" /></a><!--IMG16--><br>Программа ожидает событие "Клик" а затем проверяет текстовое поле на наличие ошибок. Если такие соблюдаются, то идёт обработка исключения с указанием причины путём заполнения текстом метки и идёт прыжок на ожидания события клик. Если ссылка правильная, то текст метки очищается, идёт переход браузера по ссылке и возврат на ожидание&nbsp; события "Клик".<br><br>Надеюсь, с этим вопросов не возникнет. На этом всё, жду вас в следующих уроках по c# :)<br>|1201|1|0|73365337`png`600`152`400`101\|68930594`png`32`32\|00061105`png`574`388`400`270\|22199530`png`570`388`400`272\|70475274`png`175`119\|76188703`png`259`113\|73454444`png`260`114\|81121380`png`600`458`400`305\|99596947`png`287`141\|97335681`png`284`60\|57348228`png`500`116`400`92\|80016752`png`600`158`400`105\|07881039`png`600`447`400`298\|59518869`png`123`34\|52482416`png`163`99\|88734570`png`498`376`399`302\||knopki_tekst_baksy_i_metki|1392798426