Вступление в скриптинг GTA 3||wmysterio|wmysterio|wmysterio@yandex.ru|/||Всем привет! С сегодняшнего дня начинается курс уроков по скриптингу GTA 3. Это решение я принял в связи с огромным к-вом вопросов по этой игре. И я, решив освоить скриптинг игры, начинаю исследовать основные возможности движка и делится своими наблюдениями с вами.<br><br>И так, начнём с того, что уже известно - лимиты. Как и в каждой игры, существует некий список, в котором определены основные ограничения на игру. Вот перечисление тех, что известно мне из справки:<br><table style="width: 100%; border-collapse: collapse; border: 1px solid black;" class="main" align="center" width=""> <tbody> <tr> <td style="border: 1px solid black;" align="center" width="194">**Характеристики**<br></td> <td style="border: 1px solid black;" class="kays" align="center" width="85">**GTA III**</td> </tr> <tr> <td style="border: 1px solid black;"> <div align="left"><span class="style7">Размер майна</span></div></td> <td style="border: 1px solid black;" class="text2">131072</td> </tr> <tr> <td style="border: 1px solid black;"> <div align="left"><span class="style7">Размер одной миссии</span></div></td> <td style="border: 1px solid black;" class="text2">32768</td> </tr> <tr> <td style="border: 1px solid black;"> <div align="left"><span class="style7">Кол-во миссий</span></div></td> <td style="border: 1px solid black;" class="text2">120</td> </tr> <tr> <td style="border: 1px solid black;"> <div class="style7" align="left">Mission Cleanup List&nbsp; </div></td> <td style="border: 1px solid black;" class="text2">50</td> </tr> <tr> <td style="border: 1px solid black;"> <div align="left"><span class="style7">Кол-во моделей (2-й сегмент)</span></div></td> <td style="border: 1px solid black;" class="text2">200</td> </tr> <tr> <td style="border: 1px solid black;"> <div align="left"><span class="style7">Кол-во работающих потоков</span></div></td> <td style="border: 1px solid black;" class="text2">128</td> </tr> <tr> <td style="border: 1px solid black;"> <div align="left"><span class="style7">Локальные переменные</span></div></td> <td style="border: 1px solid black;" class="text2">16 + 2 <span class="text5">timers</span></td> </tr> <tr> <td style="border: 1px solid black;"> <div align="left"><span class="style7">Кол-во вложенных gosub</span></div></td> <td style="border: 1px solid black;" class="text2">4</td> </tr> <tr> <td style="border: 1px solid black;" class="style7">Text_Draw</td> <td style="border: 1px solid black;" class="text2">2</td> </tr> <tr> <td style="border: 1px solid black;"> <div align="left"><span class="style7">Парковки машин (014B:)</span></div></td> <td style="border: 1px solid black;" class="text2">160</td> </tr> <tr> <td style="border: 1px solid black;"> <div align="left"><span class="style7">Кол-во маркеров</span></div></td> <td style="border: 1px solid black;" class="text2">32</td> </tr> <tr> <td style="border: 1px solid black;"> <div align="left"><span class="style7">Кол-во пикапов</span></div></td> <td style="border: 1px solid black;" class="text2">336</td> </tr> <tr> <td style="border: 1px solid black;"> <div align="left"><span class="style7">Максимальный опкод</span></div></td> <td style="border: 1px solid black;" class="text2">0481</td> </tr> <tr> <td style="border: 1px solid black;"> <div align="left"><span class="style7">Число сфер на экране</span></div></td> <td style="border: 1px solid black;" class="text2">16</td> </tr> <tr> <td style="border: 1px solid black;"> <div align="left"><span class="style7">Типы гаражей, сохраняющих машины</span> <br> </div></td> <td style="border: 1px solid black;" class="text2">16..18</td> </tr></tbody></table>Сразу падает в глаза, что движок не поддерживает внешние скрипты, что существенно будет влиять на производительность скрипта, теперь потоки будет играть роль этих скриптов. Мимо это отсутствуют таблицы переходов, что сильно влияет на длину кода. Теперь придётся по старинке - использовать условия :)<br><br>Когда я впервые открыл мейн, который находится в папке **Data**, то меня удивило огромное количество глобальных переменных. В принципе, при мизерном количестве локальных (16+2 штук) переменных, такой шаг вполне оправдан. Минимальный код, при котором работала игра составил всего 9 строк:<!--uzcode--><div class="bbCodeBlock"><div class="bbCodeName" style="padding-left:5px;font-weight:bold;font-size:7pt">Код</div><div class="codeMessage" style="border:1px inset;max-height:200px;overflow:auto;height:expression(this.scrollHeight<5?this.style.height:scrollHeight>200?'200px':''+(this.scrollHeight+5)+'px');"><!--uzc--> DEFINE OBJECTS 1 <br> DEFINE OBJECT SANNY_BUILDER 3.1.3&nbsp;&nbsp;<br> DEFINE MISSIONS 0 <br> thread 'MAIN' <br> 0053: $PLAYER_CHAR = create_player #NULL at 811.875 -939.9375 35.75 <br> 01F5: $PLAYER_ACTOR = create_emulated_actor_from_player $PLAYER_CHAR <br> $ONMISSION = 0 // integer values <br> fade 1 1000 <br> end_thread <!--/uzc--></div></div><!--/uzcode-->Мимо этого, при смерти/аресте игрока, точка его появления была очень близко к месту смерти. Напомню, что в Сан Андреасе, если не указать точки рестарта, игра работала неправильно и в конечном счёте нужно было делать перезапуск.<br><br>Так же удивил геймплей с таким мейном - по улицам езлило просто огромное количество полицейских машин и такси. Людей можно было на пальцах пересчитать. Сравнив гта3 и Сан Андреас можно аплодировать разработчикам, что они настолько усовершенствовали движок GTA 3, что сделали на нём культовую San Andreas.<br><br>Разница в движках и возможностях игр, естественно повлияют на разработку скриптов. В GTA 3 есть целая куча опкодов, которых нет в СА и это будет самым интересным моментом в исследовании игры с Клодом - главным героем первой трехмерной игры о GTA.<br><br>Это был вступительный урок по скриптингу GTA , с вами был **wmysterio**, до встречи <img src="http://s49.ucoz.net/sm/15/smile.gif" border="0" align="absmiddle" alt="smile" />|1318|1|0||vstuplenie_v_skripting_gta_3|1392523118