ООП в c# Часть 1||wmysterio|wmysterio|wmysterio@yandex.ru|||Всем привет! В очередной раз мы рассмотрим возможности ЯП (языка программирования, для тех, кто не знал это сокращение <img src="http://s49.ucoz.net/sm/15/smile.gif" alt="smile" align="absmiddle" border="0"> ) C#, и сегодня речь пойдёт о классах. Мы научимся создавать классы и изучим базовые понятия с объектно-ориентированного программирования(ООП).<br><br>Давайте начнём с понятия "Класс". Класс - это пользовательский тип данных, который содержит в себе некий набор данных, функций. Конструкцию класса вы уже видели много раз из уроков по скриптхук'у:<br><table style="width: 100%; border-collapse: collapse;"><tbody><tr><td style="border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">СПЕЦИФИКАТОР ДОСТУПА ИМЯ КЛАССА {<br>&nbsp;&nbsp;&nbsp;&nbsp; СПЕЦИФИКАТОР ДОСТУПА КОНСТРУКТОР() {<br><br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; ПОЛЯ, МЕТОДЫ, СВОЙСТВА, ПРОЦЕДУРЫ.<br>}<br></td></tr></tbody></table>Как уже звучало в предыдущих уроках, есть 4 спецификатора доступа <font color="#0000ff">public</font>, <font color="#0000ff">protected</font>, <font color="#0000ff">private</font> и <font color="#0000ff">internal</font>. Этот спецификатор указывает видимость содержимого класса из вне(то есть за пределами класса). Я составил таблицу, и перечислил разницу между этими спецификаторами:<table style="width: 100%; border-collapse: collapse;"><tbody><tr><td style="vertical-align: top; letter-spacing: 0px; word-spacing: 0px; text-align: center; border-width: 1px; border-style: solid; border-color: #000000;" align="center">**Спецификатор<br>**</td><td style="vertical-align: top; letter-spacing: 0px; word-spacing: 0px; text-align: center; border-width: 1px; border-style: solid; border-color: #000000;" align="center">**Описание<br>**</td></tr><tr><td style="vertical-align: top; letter-spacing: 0px; word-spacing: 0px; text-align: left; border-width: 1px; border-style: solid; border-color: #000000;"><font color="#0000ff">public</font></td><td style="vertical-align: top; letter-spacing: 0px; word-spacing: 0px; text-align: left; border-width: 1px; border-style: solid; border-color: #000000;">Публичный, поле доступно всем желающим объектам, которые работают с этим классом<br></td></tr><tr><td style="vertical-align: top; letter-spacing: 0px; word-spacing: 0px; text-align: left; border-width: 1px; border-style: solid; border-color: #000000;"><font color="#0000ff">protected</font></td><td style="vertical-align: top; letter-spacing: 0px; word-spacing: 0px; text-align: left; border-width: 1px; border-style: solid; border-color: #000000;">Защищённый, поле доступно только классу и его потомку<br></td></tr><tr><td style="vertical-align: top; letter-spacing: 0px; word-spacing: 0px; text-align: left; border-width: 1px; border-style: solid; border-color: #000000;"><font color="#0000ff">private</font></td><td style="vertical-align: top; letter-spacing: 0px; word-spacing: 0px; text-align: left; border-width: 1px; border-style: solid; border-color: #000000;">Приватное, поле или метод доступно только самому классу<br></td></tr><tr><td style="vertical-align: top; letter-spacing: 0px; word-spacing: 0px; text-align: left; border-width: 1px; border-style: solid; border-color: #000000;"><font color="#0000ff">internal</font></td><td style="vertical-align: top; letter-spacing: 0px; word-spacing: 0px; text-align: left; border-width: 1px; border-style: solid; border-color: #000000;">Внутренний, поле доступно только в одной области пространства имён. Не будет виден для другого **namespace**.<br></td></tr></tbody></table>Пример класса вы видели из предыдущих уроков по c#. По-этому для вас объявить класс не составит проблем. Вот у меня получился примерно такой:<br><table style="width: 100%; border-collapse: collapse;"><tbody><tr><td style="border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">public class Car {<br><font color="#006400">&nbsp;&nbsp;&nbsp; public int Speed = 0;<br>&nbsp;&nbsp;&nbsp; public int Accelerate = 0;<br>&nbsp;&nbsp;&nbsp; public int Handling = 0;</font><br><br><font color="#0000ff">&nbsp;&nbsp;&nbsp; public Car() {&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Пустой конструктор &nbsp; <br>&nbsp;&nbsp;&nbsp; }</font><br><br><font color="#800080">&nbsp;&nbsp;&nbsp; public void SetSpeed(int NewSpeed) {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Speed = NewSpeed;<br>&nbsp;&nbsp;&nbsp; } </font><br>} <br></td></tr></tbody></table><font color="#006400">Зелёным</font> цветом обозначены изначальные данные, которые свойственны этому классу. Их называют полями класса.<br><font color="#0000ff">Синим</font> цветом обозначен конструктор класса.<br><font color="#800080">Фиолетовым</font> цветом обозначены функции, которые может выполнять объект класса. В C# такие функции принято называть методами, так что метод - это та же функция.<br><br>Количество полей, методов и конструкторов в классе может быть сколько угодно. Так же само и классов в пространстве имён может быть сколько влезет. Давайте создадим ещё один класс:<table style="width: 100%; border-collapse: collapse;"><tbody><tr><td style="border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">public class Lanborghini {<br>&nbsp;&nbsp;&nbsp; <font color="#32cd32">public int DoorCount = 4;<br>&nbsp;&nbsp;&nbsp; public string EngineType = "Automatic";</font><br><br><font color="#0000ff">&nbsp;&nbsp;&nbsp; public Lanborghini() {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Пустой конструктор <br>&nbsp;&nbsp;&nbsp; }</font><br>}<br></td></tr></tbody></table>Существует такое понятие, как наследование классов. В народе это известно как понятия "Предок-Потомок", "Отец-Сын", "Иерархия классов". Это понятия&nbsp; говорит о том, что класс-наследник(Сын, Потомок) может наследовать свойства, процедуры класса "Предка"("Отца"). Если навести пример из жизни, то Сын Иван может наследовать некие особые приметы Отца Дмитрия, например, цвет глаз, манеру походки и тому подобное. Давайте сделаем тоже самое в программировании. Для этого нужно объявить класса-наследника. Пусть это будет Ламборгини, который наследует класс Машина. Наш код теперь будет иметь следующий вид:<table style="width: 100%; border-collapse: collapse;"><tbody><tr><td style="border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">&nbsp;&nbsp;&nbsp; public class Car {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public int Speed = 0;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public Car() {&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public void SetSpeed(int NewSpeed) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Speed = NewSpeed;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } <br>&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; public class Lanborghini : Car{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public int DoorCount = 4;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public string EngineType = "Automatic";<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public Lanborghini() {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br></td></tr></tbody></table>Распознать класс-наследника можно по этой записи:<table style="width: 100%; border-collapse: collapse;"><tbody><tr><td style="border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">public class Lanborghini : Car</td></tr></tbody></table>Это значит, что класс Lanborghini наследует некие методы и свойства класса Car и при этом имеет свои же методы. Давайте напишем код программы, где мы создадим объект класса Lanborghini:<table style="width: 100%; border-collapse: collapse;"><tbody><tr><td style="border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">using System;<br><br>namespace Consol {<br>&nbsp;&nbsp;&nbsp; class Program {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; static void Main() {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Lanborghini Lambo = new Lanborghini();<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // Здесь будут другие команды<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.ReadKey();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; public class Car {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public int Speed = 0;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public Car() {&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public void SetSpeed(int NewSpeed) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Speed = NewSpeed;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } <br>&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; public class Lanborghini : Car{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public int DoorCount = 4;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public string EngineType = "Automatic";<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public Lanborghini() {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br>}<br></td></tr></tbody></table>Давайте посмотрим какие же свойства и команды имеет объект, что мы создали:<br><!--IMG2--><img alt="" src="/_pu/1/49862482.png" /><!--IMG2--><br>Оранжевым стрелками обозначены поля, которые имеет сам класс Lanborghini. Но откуда взялись поля, обозначены зелёными стрелками??? Здесь и проявилось наследование! Класс заимствовал эти поля из класса Car и теперь мы можем применять их к нашей Ламбо <img src="http://s49.ucoz.net/sm/15/smile.gif" alt="smile" align="absmiddle" border="0"> Теперь важную роль играет спецификаторы доступа. Давайте в классе Car мы напишем private возле процедуры SetSpeed:<table style="width: 100%; border-collapse: collapse;"><tbody><tr><td style="border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;"> private void SetSpeed(int NewSpeed)</td></tr></tbody></table>И теперь посмотрим, что нам скажет объект Lambo:<br><!--IMG3--><img alt="" src="/_pu/1/26345781.png" /><!--IMG3--><br>Процедура пропала! Таким образом класс Lanborghini не смог наследовать её из класса Car. Теперь, я думаю, вы поняли для чего нужны эти спецификаторы вообще :)<br><br>Давайте сделаем эксперимент: создадим класс Gallardo, который будет потомком класса Lamborghini, и посмотрим, что унаследует он от Предка:<table style="width: 100%; border-collapse: collapse;"><tbody><tr><td style="border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">public class Gallardo : Lanborghini {<br>&nbsp;&nbsp;&nbsp; public int EnginePower = 1500;<br>&nbsp;&nbsp;&nbsp; public int TireSize = 4;<br><br>&nbsp;&nbsp;&nbsp; public Gallardo() {<br><br>&nbsp;&nbsp;&nbsp; }<br>}<br></td></tr></tbody></table>Создадим в теле программы объект класса Gallardo и посмотрим его наследство (если вы понимаете о чём я <img src="http://s49.ucoz.net/sm/15/tongue.gif" alt="tongue" align="absmiddle" border="0"> )<table style="width: 100%; border-collapse: collapse;"><tbody><tr><td style="border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">Gallardo MyCar = new Gallardo();<br></td></tr></tbody></table>Унаследовал вот что:<br><!--IMG4--><img alt="" src="/_pu/1/42299098.png" /><!--IMG4--><br>Оранжевыми стрелками показаны поля, которые имеет класс Gallardo, зелёными стрелками указаны поля, которые унаследовал класс от Lanborghini. Что же значит синяя стрелка? Он её унаследовал от класса Car. Как такое возможно, ведь мы указали, что наследовать нужно из класса Lanborghini? Здесь можно сделать вывод: "<u>Всё, что наследует класс-Отец от своего класса-Отца наследуется и для потомка</u>". Если взять выражение из жизни, то можно выразится так: "Всё что наследует Отец от своего Дедушки, наследуется и для Сына". В этом и суть иерархии классов. Можно сделать такую картинку, что бы легче понять:<br><!--IMG1--><a href="/_pu/1/80243543.png" class="ulightbox" target="_blank" title="Нажмите, для просмотра в полном размере..."><img alt="" src="/_pu/1/s80243543.jpg" /></a><!--IMG1--><br>Оранжевыми стрелками указаны поля классов, которые задаются изначально в классе.<br>Зелёными стрелками показано какие поля унаследует класс от своего отца.<br>Синими стрелками показано какие поля унаследуются классом от более "старших" классов<br><br>Несколько слов скажу о спецификаторе <font color="#0000ff">protected</font>. Если в классе Car сделать переменную Speed с этим спецификатором<table style="width: 100%; border-collapse: collapse;"><tbody><tr><td style="border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">protected int Speed = 0;<br></td></tr></tbody></table>то класс-потом его унаследует, но вызвать его из вне не получится<br><!--IMG5--><img alt="" src="/_pu/1/37370351.png" /><!--IMG5--><br>Но получать доступ к этому полю мы можем внутри. Если в конструкторе мы нажмём <font color="#0000ff">**CTRL**</font>+<font color="#0000ff">**ПРОБЕЛ**</font>, то мы сможем увидеть наследованное поле:<br><!--IMG6--><img alt="" src="/_pu/1/46562547.png" /><!--IMG6--><br>Ключик возле поля указывает, что параметр унаследовался со спецификатором <font color="#0000ff">protected</font>. Мы можем создать поле в классе Gallardo, которое будет принимать унаследованное значение<table style="width: 100%; border-collapse: collapse;"><tbody><tr><td style="border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">public int GSpeed;<br></td></tr></tbody></table>А в конструкторе заполним его:<br><table style="width: 100%; border-collapse: collapse;"><tbody><tr><td style="border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">public Gallardo() {<br>&nbsp;&nbsp;&nbsp; GSpeed = Speed;<br>}<br></td></tr></tbody></table>И теперь мы сможем увидеть поле GSpeed в теле основной программы, как поле, унаследованное от Car, которое переданное в поле класса Gallardo (как видите пошла тафтология и повторение терминов, так как я не могу подобрать нужных синонимов к этим словам <img src="http://s49.ucoz.net/sm/15/smile.gif" alt="smile" align="absmiddle" border="0"> ):<br><!--IMG7--><img alt="" src="/_pu/1/07018888.png" /><!--IMG7--><br>Если подобное сделать для класса Lanborghini:<br><table style="width: 100%; border-collapse: collapse;"><tbody><tr><td style="border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">&nbsp;&nbsp;&nbsp; public class Lanborghini : Car{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public int DoorCount = 4;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public string EngineType = "Automatic";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public int GSpeed;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public Lanborghini() {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GSpeed = Speed;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; public class Gallardo : Lanborghini {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public int EnginePower = 1500;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public int TireSize = 4;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public Gallardo() {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br></td></tr></tbody></table> то его потомок унаследует это значение:<br><!--IMG8--><img alt="" src="/_pu/1/90920270.png" /><!--IMG8--><br>И при этом внутри себя может получать доступ к полю своего Дедушки.<br><br>В следующий части мы поговорим о понятии "Полиморфизма" и.т.п.<br><hr>С этого урока вы уже понимаете, для чего нужен символ "<font color="#0000ff">**:**</font>" в следующее выражение из уроков о ScriptHoockDotNet:<table style="width: 100%; border-collapse: collapse;"><tbody><tr><td style="border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">public class Thread : Script {<br>&nbsp;&nbsp;&nbsp;&nbsp; // ...<br>}<br></td></tr></tbody></table>Класс Thread (наш аналог потока из Sanny Builder) наследует поля, свойства, методы, процедуры, классы и тому подобное из "главного" класса Script, который находится в библиотеке ScriptHookDotNet.dll. <br><br>Это как минимум основы ООП, и у ваш арсенал сриптинга должны входить эти возможности и умение ими воспользоваться. :)<br><br><font color="#ff0000">Важно! </font>В отличии от некоторых языков программирования, класс-Потомок может наследовать поля только одного класса-Родителя.<br><hr><font color="#ff0000">P.S</font> Возможно, некоторые вещи я неправильно назвал или описал. Напишите в комментах, что не так, я исправлю.|964|1|0|80243543`png`425`504`400`474\|49862482`png`174`173\|26345781`png`174`156\|42299098`png`169`195\|37370351`png`169`173\|46562547`png`187`148\|07018888`png`167`195\|90920270`png`167`195\||oop_v_c|1392798677