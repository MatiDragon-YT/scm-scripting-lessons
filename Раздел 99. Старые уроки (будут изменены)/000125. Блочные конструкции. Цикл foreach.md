Блочные конструкции. Цикл foreach||wmysterio|wmysterio|wmysterio@yandex.ru|||Всем привет! Мы продолжаем изучать блочные конструкции, и на этот раз я хотел бы рассказать ещё об одном виде циклов - <font color="#0000ff">foreach</font><font color="#0000ff"></font>. Как я уже говорил в предыдущих уроках, переводится название как "**Для каждого**". По функционалу он очень поход на цикл "**Для**"(<font color="#0000ff">for</font>), но отличается тем, что у него явно не указывается счётчик. Счётчиком выступает элемент какой-то коллекции, в этом предназначение. Как привило этот цикл используют тогда, когда в массиве(или другой коллекции) неизвестное количество элементов. Сама конструкция выглядит следующим образом:<br><table style="width: 100%; border-collapse: collapse;"><tbody><tr><td style="border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">...<br><font color="#0000ff">foreach</font> (**<font color="#808000">ТипКоллекции</font>** <font color="#800080">**Индекс**</font> <font color="#0000ff">in</font> <font color="#808000">**ПеременнаяКоллекции**</font>) {<br>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#006400"> // Действие над **Индекс**</font>**<br>**}<br>...<br></td></tr></tbody></table>Что бы вы могли понять лучше, вот простой пример: создаём массив и заполняем его числом 2:<br><table style="width: 100%; border-collapse: collapse;"><tbody><tr><td style="border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">... <font color="#0000ff"><br>int</font>[] **<font color="#808000">MyArray</font>** = <font color="#0000ff">new int</font>[50];<br><br><font color="#0000ff">foreach</font> (<font color="#0000ff">int</font> <font color="#800080">**Item**</font> <font color="#0000ff">in</font> <font color="#808000">**MyArray**</font>) {<br>&nbsp;&nbsp;&nbsp;&nbsp; <font color="#808000">**MyArray**</font>[<font color="#800080">**Item**</font>**<font color="#a9a9a9"></font>**] = 2;<br>}<br>...<br></td></tr></tbody></table>В качестве индекса могут выступать целые объекты классов, структур и.т.п. Вот простенький пример: есть массив структур, заполненный данными. Что бы усложнить задание, мы сгенерируем количество элементов, затем получим данные из элемента :<br><table style="width: 100%; border-collapse: collapse;"><tbody><tr><td style="border-width: 1px; border-style: solid; border-color: #000000; letter-spacing: 0px; word-spacing: 0px;">...<br><font color="#0000ff">public</font> <font color="#0000ff">struct</font> <font color="#0000ff">Student</font> {<br>&nbsp;&nbsp;&nbsp;&nbsp; <font color="#0000ff">public</font> string Name = "MyName";<br>&nbsp;&nbsp;&nbsp;&nbsp; <font color="#0000ff">public</font> int Year = 2;<br>}<br><font color="#0000ff">public</font> Random Rnd = <font color="#0000ff">new</font> Random();<br>...<br><font color="#0000ff">Student</font>[] **<font color="#808000">MyArray</font>** = <font color="#0000ff">new</font> <font color="#0000ff">Student</font>[Rnd.Next(1, 120)];<br><br><font color="#0000ff">foreach</font> (<font color="#0000ff">Student</font> <font color="#800080">**Item**</font> <font color="#0000ff">in</font> **<font color="#808000">MyArray</font>**) {<br>&nbsp;&nbsp;&nbsp;&nbsp; <font color="#0000ff">string</font> Name = <font color="#800080">**Item**</font>.Name;<br>&nbsp;&nbsp;&nbsp;&nbsp; <font color="#0000ff">int</font> Year = <font color="#800080">**Item**</font>**<font color="#a9a9a9"></font>**.Year;<br>}<br>...<br></td></tr></tbody></table><font color="#ff0000">Важно!</font> Цикл <font color="#0000ff">foreach</font> работает не для всех коллекций! бывают случаи, что коллекции просто не поддерживают использование этого цикла.<br><br>Давайте напишем скрипт для GTA 4, что бы при нажатии кнопки <font color="#0000ff">**tab**</font>, мы получали массив педов и дали каждому оружие а также пометим маркером их на радаре:<!--uzcode--><div class="bbCodeBlock"><div class="bbCodeName" style="padding-left:5px;font-weight:bold;font-size:7pt">Код</div><div class="codeMessage" style="border:1px inset;max-height:200px;overflow:auto;height:expression(this.scrollHeight<5?this.style.height:scrollHeight>200?'200px':''+(this.scrollHeight+5)+'px');"><!--uzc-->using System; <br> using System.Windows.Forms; <br> using GTA; <br><br> namespace TestScript { <br>&nbsp;&nbsp;public class Thread : Script { <br>&nbsp;&nbsp;public Thread() { <br>&nbsp;&nbsp;while (true) { <br>&nbsp;&nbsp;if(Game.isKeyPressed(Keys.Tab)){ <br>&nbsp;&nbsp;Ped[] PedArrey = World.GetAllPeds(); <br>&nbsp;&nbsp;foreach (Ped CurrentPed in PedArrey) { <br>&nbsp;&nbsp;if (CurrentPed.isAlive) { <br>&nbsp;&nbsp;CurrentPed.Weapons.MP5.Ammo = 500; <br>&nbsp;&nbsp;CurrentPed.AttachBlip(); <br>&nbsp;&nbsp;} <br>&nbsp;&nbsp;} <br>&nbsp;&nbsp;} <br>&nbsp;&nbsp;Wait(0); <br>&nbsp;&nbsp;} <br>&nbsp;&nbsp;} <br>&nbsp;&nbsp;} <br> }<!--/uzc--></div></div><!--/uzcode-->Результат:<br><!--IMG1--><a href="/_pu/1/58190709.png" class="ulightbox" target="_blank" title="Нажмите, для просмотра в полном размере..."><img alt="" src="/_pu/1/s58190709.jpg" /></a><!--IMG1--><br><br>Следует учесть, что количество актёров в массиве всегда разное, так как люди генерируются вблизи игрока и в зависимости от скорости создания актёров и дистанции прорисовки.<br><br>Надеюсь этот цикл станет вашим другом <img src="http://s49.ucoz.net/sm/15/smile.gif" alt="smile" align="absmiddle" border="0">|602|1|0|58190709`png`600`372`400`248\||blochnye_konstrukcii_cikl_foreach|1392798763